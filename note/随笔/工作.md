1.数据库

m1-bi-devdb04.m1.baidu.com

8003

BIBETA

talent

TALENTx5test17

push代码

git push origin HEAD:refs/for/inventory

软通邮箱

xinluog.isoftstone.com

xzdh=5sK

{"currentPage":1,"pageSize":5,"dataType":"POSTBASE"}

<http://localhost:8080/talent-inventory/inventory>

hantingting01

hantingting01c17c72ab



```java
/**
 * 5.回调接口，修改审批状态
 */
@RequestMapping(value = "callback2", method = RequestMethod.GET)
@ResponseBody
public AjaxResult callback(String rehireId, String processState) {
    try {
        System.out.println("RehireCtrl callback");
        rehireService.callback(rehireId, processState);
    } catch (Exception e) {
        LOGGER.error(
                DateUtil.formatTime(new Date()) + "--修改审批状态失败，rehireId=" + rehireId + ",processState="
                        + processState + "," + e.getMessage());
        return AjaxResult.errorResult("error:" + e.getMessage());
    }
    return AjaxResult.successResult("success");
}

// 查询申请人的审批人
public String findApprover_bak() {
        String sql =
                "with person_and_super as ( select * from  talent.rehire_report_test  where person_nk=:personNk ), "
                        + "leader as  ( select sup_person_nk as person_nk, sup_person_wk "
                        + "as person_wk, sup_last_name as last_name, sup_email_address as email_address, "
                        + "sup_tpumob_grade as tpumob_grade, sup_uuap_username as uuap_username, row_number() over ( "
                        + "order by distance desc)  as rk, distance from person_and_super where distance<(select min"
                        + "(distance) from person_and_super where regexp_like(sup_tpumob_grade,'^M3|^M4|^M5|^M6|^M7')"
                        + " ) ) select l.uuap_username FROM leader l where rk = 1";
        Map<String, Object> param = new HashMap<String, Object>(1);
        param.put("personNk", personNk());
        try {
            return queryForObject(sql, param, String.class);
        } catch (IncorrectResultSizeDataAccessException e) {
            return null;
        }
    }
```

bpm：http://it.baidu.com

测试：http://cq01-bkm-test-webfront02.cq01.baidu.com:8484/processcenter/task

提交 0

